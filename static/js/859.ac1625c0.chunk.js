"use strict";(self.webpackChunkepisode_1=self.webpackChunkepisode_1||[]).push([[859],{5550:function(n,e,t){t.d(e,{j:function(){return i}});var s=t(2791),i=function(n){(0,s.useEffect)((function(){document.title=n}),[n])}},9859:function(n,e,t){t.r(e),t.d(e,{default:function(){return y}});var s=t(885),i=t(5434),o=t(6910),r=t(4165),c=t(1413),a=t(5861),d=t(1724),l=t(4695),u=t(887),p=t(7799),f=t(184),m=function(){var n,e=(0,o.F_)(i.I),t=(0,s.Z)(e,1)[0],m=d.Ry().shape({description:d.Z_().required("You Must Add A Description")}),v=(0,u.cI)({resolver:(0,l.X)(m)}),h=v.register,x=v.handleSubmit,g=v.formState.errors,j=(0,p.hJ)(i.db,"posts"),Z=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,p.ET)(j,(0,c.Z)((0,c.Z)({},e),{},{userProfilePhoto:null===t||void 0===t?void 0:t.photoURL,username:null===t||void 0===t?void 0:t.displayName,userId:null===t||void 0===t?void 0:t.uid,postUploadedTime:(0,p.Bt)()}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,f.jsxs)("div",{children:[(0,f.jsxs)("form",{onSubmit:x(Z),className:"create-new-post",children:[(0,f.jsx)("img",{className:"writeIcon",src:"https://cdn-icons-png.flaticon.com/512/1159/1159633.png",alt:"createPost"}),(0,f.jsx)("textarea",(0,c.Z)({placeholder:"Type something..."},h("description"))),(0,f.jsx)("button",{type:"submit",children:"Upload"})]}),(0,f.jsx)("p",{style:{color:"red",fontSize:"17px",textAlign:"center"},children:null===g||void 0===g||null===(n=g.description)||void 0===n?void 0:n.message})]})},v=function(n){var e=n.iconFunction,t=n.fileType,s=n.img,i=n.span;return(0,f.jsxs)("div",{onClick:e||null,className:"upload upload".concat(t),children:[(0,f.jsx)("img",{src:s,alt:t}),(0,f.jsx)("span",{children:i})]})},h=t(2791),x=function(n){var e=n.post,t=(0,o.F_)(i.I),c=(0,s.Z)(t,1)[0],d=(0,h.useState)([]),l=(0,s.Z)(d,2),u=l[0],m=l[1],x=(0,p.hJ)(i.db,"likes"),g=(0,p.IO)(x,(0,p.ar)("postId","==",e.id)),j=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var e;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,p.PL)(g);case 2:e=n.sent,m(e.docs.map((function(n){return{userId:n.data().userId}})));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Z=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,p.ET)(x,{userId:null===c||void 0===c?void 0:c.uid,postId:e.id});case 2:j();case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),y=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var t,s,o;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,p.IO)(x,(0,p.ar)("postId","==",e.id),(0,p.ar)("userId","==",null===c||void 0===c?void 0:c.uid)),n.next=3,(0,p.PL)(t);case 3:return s=n.sent,o=(0,p.JU)(i.db,"likes",s.docs[0].id),n.next=7,(0,p.oe)(o);case 7:j();case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),k=null===u||void 0===u?void 0:u.find((function(n){return n.userId===(null===c||void 0===c?void 0:c.uid)}));return(0,h.useEffect)((function(){j()}),[]),(0,f.jsxs)("div",{className:"allPosts",children:[(0,f.jsxs)("div",{className:"postHeader",children:[(0,f.jsx)("img",{src:null===e||void 0===e?void 0:e.userProfilePhoto,alt:null===e||void 0===e?void 0:e.displayName}),(0,f.jsx)("div",{className:"postHeader-body",children:(0,f.jsx)("h3",{children:null===e||void 0===e?void 0:e.username})})]}),(0,f.jsx)("div",{className:"postBody",children:(0,f.jsx)("p",{children:null===e||void 0===e?void 0:e.description})}),(0,f.jsxs)("p",{id:"likesAmount",children:["Likes: ",u.length]}),(0,f.jsxs)("div",{className:"postFooter",children:[(0,f.jsx)(v,{iconFunction:k?y:Z,fileType:"like",img:k?"https://cdn-icons-png.flaticon.com/512/1076/1076984.png":"https://cdn-icons-png.flaticon.com/512/1077/1077035.png",span:k?"Unlike":"Like"}),(0,f.jsx)(v,{fileType:"comment",img:"https://cdn-icons-png.flaticon.com/512/1380/1380338.png",span:"Comment"}),(0,f.jsx)(v,{fileType:"like",img:"https://cdn-icons-png.flaticon.com/512/2958/2958783.png",span:"Share"})]})]})},g=function(){var n=(0,h.useState)([]),e=(0,s.Z)(n,2),t=e[0],o=e[1],d=(0,p.hJ)(i.db,"posts"),l=(0,p.IO)(d,(0,p.Xo)("postUploadedTime","desc"));return(0,h.useEffect)((function(){var n=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var e;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,p.PL)(l);case 2:e=n.sent,o(null===e||void 0===e?void 0:e.docs.map((function(n){return(0,c.Z)((0,c.Z)({},n.data()),{},{id:n.id})})));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[l,t]),(0,f.jsx)(f.Fragment,{children:t.map((function(n,e){return(0,f.jsx)(x,{post:n},e)}))})},j=t(5550),Z=t(7689),y=function(){var n=(0,o.F_)(i.I),e=(0,s.Z)(n,1)[0],t=(0,Z.s0)(null);return(0,j.j)("Home"),(0,f.jsx)("div",{className:"home",style:{flex:e?.6:1},children:e?(0,f.jsxs)("div",{className:"homePosts",children:[(0,f.jsxs)("div",{className:"postCreate",children:[(0,f.jsx)(m,{}),(0,f.jsxs)("div",{className:"uploadFiles",children:[(0,f.jsx)(v,{fileType:"Image",img:"https://cdn-icons-png.flaticon.com/512/833/833281.png",span:"Photo"}),(0,f.jsx)(v,{fileType:"Video",img:"https://cdn-icons-png.flaticon.com/512/1179/1179069.png",span:"Video"}),(0,f.jsx)(v,{fileType:"Event",img:"https://cdn-icons-png.flaticon.com/512/2693/2693646.png",span:"Event"}),(0,f.jsx)(v,{fileType:"Article",img:"https://cdn-icons-png.flaticon.com/512/2696/2696555.png",span:"Article"})]})]}),(0,f.jsx)("div",{className:"posts",children:(0,f.jsx)(g,{})})]}):(0,f.jsx)("div",{children:(0,f.jsx)("h1",{onClick:function(){return t("/login")},children:"Go To Log In Page"})})})}}}]);
//# sourceMappingURL=859.ac1625c0.chunk.js.map